PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE migrations (migration_label text not null, created_at int not null default (strftime('%s','now')), primary key (migration_label));
INSERT INTO migrations VALUES('schema',1234567890);
INSERT INTO migrations VALUES('20191203190521',1234567890);
CREATE TABLE db (
    varname varchar not null,
    playerid varchar not null,
    vartype tinyint not null,
    payload blob not null,
    compressed bool not null default false,
    unique(varname, playerid)
);
CREATE TABLE meta (
    key varchar,
    value varchar
);
CREATE TABLE areadists (areasource TEXT, areadest TEXT, distance INTEGER);

CREATE TABLE areadistshash (hash INTEGER);
INSERT INTO areadistshash VALUES(-1014605157);
CREATE INDEX idx_areadists ON areadists(areasource);
CREATE INDEX idx_areadists_source_distance ON areadists(areasource, distance);
CREATE INDEX idx_areadists_source_dest ON areadists(areasource, areadest);
COMMIT;
